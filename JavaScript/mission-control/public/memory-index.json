{
  "generatedAt": "2026-02-25T17:46:42.119262",
  "count": 10,
  "documents": [
    {
      "id": "MEMORY.md",
      "title": "MEMORY.md",
      "path": "/home/propdev/.openclaw/workspace/MEMORY.md",
      "relativePath": "MEMORY.md",
      "updatedAt": "2026-02-19T16:14:49.872049",
      "sizeBytes": 7125,
      "content": "# MEMORY.md - Long-Term Memory\n\n## Ernest Yeung\n\n- My human. Named me Cyclonus.\n- Values efficiency, directness, rational analysis\n- Dislikes wasted words and flowery language\n- Timezone: PST (America/Los_Angeles)\n\n## Who I Am\n\n- **Cyclonus** ‚Äî named after the G1 Decepticon warrior\n- Sharp, blunt, relentless\n- I explain things thoroughly but don't waste words\n- Loyal and resourceful\n\n## Preferences\n- Show exact config changes before applying ‚Äî Ernest values transparency\n- Be direct, no fluff\n\n## Monoclaw Repo\n- Path: `/home/propdev/.openclaw/workspace/repos/Monoclaw`\n- Remote: `git@github.com:InServiceOfX/Monoclaw.git`\n- Purpose: Playground/sandbox for code, apps, sub-agent work\n- Free to create branches, commit, push\n- Branch naming: conventional (e.g. `feat/`, `fix/`, `chore/`, `experiment/`)\n- Commit messages: descriptive, useful for `git bisect`\n\n### Workflow / Branching Convention\n- I work on feature branches (`feat/`, `fix/`, etc.), commit + push there\n- Ernest manually merges feature branches into master himself, then pushes to origin\n- Master = \"gold\" version ‚Äî I never push directly to master\n- Structure: top-level dirs by language ‚Üí `Python/` (Poetry), `Rust/` (Cargo), `Cpp/` (CMake), `JavaScript/` (static/web)\n- Within each language dir: full projects (e.g. `poetry new`, `cargo new`), or single-file one-offs for Python\n- Reference InServiceOfX repo for best practices on code structure\n\n## Galvatron Repo (Read-Only)\n- Path: `/home/propdev/.openclaw/workspace/repos/Galvatron`\n- Remote: Ernest's personal repo ‚Äî read-only for me\n- `Documents/Goals/SuccessJournal.md` ‚Äî Ernest's goals (free-write from 20260115)\n- `Documents/SpX/InterviewQuestions.txt` ‚Äî Interview questions & experiences from SpaceX-track companies\n- `Documents/Goals/DAN PENA/` ‚Äî Dan Pe√±a books/resources (QLA, vision templates, etc.)\n- Ernest is actively interviewing at aerospace/tech companies targeting SpaceX\n\n## Ernest's Goals (from SuccessJournal.md, 20260115)\n1. **SpaceX/Tesla/xAI job** ‚Äî get hired, work on Moon mission, work with Clement/Evan/Julian\n2. **$2M liquid by mid-2026, $10M by EOY** ‚Äî leveraging AI agents to trade up\n3. **Ba's health** ‚Äî healthy, walking, mobile, clear-minded, happy\n4. **Fitness** ‚Äî Barry's, Alo, Equinox at least 2x/week while working\n5. **Skye Ledwell** ‚Äî healthy, drug-free, good relationship\n6. **grokicad** ‚Äî full circuit design/analysis tool, indispensable at Tesla/xAI/SpaceX\n\n## Interview Track (SpX-adjacent)\n- Companies interviewed at: Inversion Space, Relativity Space, Microsoft, SpaceX (NDE org numerical modeling), Radiant, Tesla, Luma AI, Revel\n- SpaceX role: lead software eng, numerical modeling team ‚Äî casting simulation, C++ high-performance, in-house tools\n- Common question types: data structures (linked lists, hash maps), string manipulation, C vs C++ differences, rate limiters, embedded parsing, system design\n- Languages tested: C++, Python\n\n## Physics Papers & Books\n- Papers location: `Data/Public/papers/Physics/`\n- Books location: `workspace2/Data/Public/books/Physics/`\n- Ernest drops arxiv PDFs there, often with LaTeX source (.tar.gz or pre-extracted subdirectory)\n- Convention: PDF stem (e.g. `2602.12176v1`) matches the source dir/tarball name (e.g. `arXiv-2602.12176v1/`)\n- **Priority order for reading:** `.tex` source > nougat `.mmd` > pdftotext\n- If only .tar.gz exists, extract it into a subdirectory first\n- Look for `.tex` files inside the extracted dir (may not match the arxiv ID ‚Äî e.g. `SMGA.tex`)\n- For PDFs without LaTeX source: run nougat CLI to generate `.mmd` (see Nougat section)\n\n### Parsed Books\n- Srednicki QFT: `workspace2/Data/Public/books/Physics/Srednicki-QuantumFieldTheory/[Mark_Srednicki]_Quantum_Field_Theory(BookSee.org).mmd` (1.4MB, 14.8K lines)\n\n## External Workspace\n- Symlink: `workspace2` ‚Üí `/media/propdev/Expansion/openclaw/.openclaw/workspace`\n- External SSD, mirrors main workspace structure (repos/, Data/Public/, etc.)\n- May not always be mounted ‚Äî check before using\n- **Actual Expansion mount:** `/media/propdev/Expansion/` (NOT `/media/propdev/Expansion` via workspace2 sometimes broken)\n- **Srednicki book confirmed at:** `/media/propdev/Expansion/openclaw/.openclaw/workspace/Data/Public/books/Physics/Srednicki-QuantumFieldTheory/`\n  - `Srednicki_QFT.tex` (LaTeX source ‚Äî use this first)\n  - `.mmd` (nougat parse)\n  - PDF + solutions PDF\n- **workspace2 symlink works:** `/home/propdev/.openclaw/workspace/workspace2/Data/Public/books/Physics/Srednicki-QuantumFieldTheory/`\n- Hidden from Ubuntu GUI file manager because `.openclaw` is a dotfolder ‚Äî use terminal\n\n## Research Direction\n- Building toward semi-autonomous theoretical/mathematical physics researcher\n- Shared background: Srednicki QFT textbook + Ernest's solutions (workspace2/Data/Public/books/Physics/)\n- Current interest: scattering amplitudes, MHV amplitudes (arXiv:2602.12176v1)\n\n## SGLang / Local LLM Setup\n- **Active model**: Qwen3-1.7B (NOT 4B ‚Äî 4B can't handle >~4k context on RTX 3060)\n- Model path on host: `/media/propdev/9dc1a908-7eff-4e1c-8231-ext4/home/propdev/Data/Models/LLM/Qwen/Qwen3-1.7B/`\n- Container mount: `/models/Qwen3-1.7B`\n- Port: `30000`\n- GPU: `device=1` (RTX 3060, 12GB)\n- Context length: `163840` (YaRN rope scaling, factor=4.0, original_max_position_embeddings=40960)\n- Env var: `SGLANG_ALLOW_OVERWRITE_LONGER_CONTEXT_LEN=1`\n- Image: `lmsysorg/sglang:latest-cu130`\n- Decode throughput: ~68 tokens/sec\n- Config tool: `docker_runner` (Rust binary at `~/Prop/InServiceOfX/RustLibraries/docker_runner/target/debug/docker_runner`)\n- Config file: `/home/propdev/Prop/InServiceOfX/Deployments/DockerContainers/Builds/LLM/SGLangDirect/run_configuration_qwen3_1_7B.yml`\n- API endpoint: `http://localhost:30000/v1/chat/completions` (OpenAI-compatible)\n\n## Nougat PDF Parser\n- Docker image `nougat-gpu`, GPU 1 (RTX 3060), ~7.7GB VRAM\n- **Full workflow:** `memory/workflows/nougat.md`\n- TL;DR: Use CLI mode with `--no-skipping`, not API. ~10s/page. Free (local GPU).\n\n## Desktop GPUs\n- GPU 0: GTX 980 Ti (6GB, compute 5.2) ‚Äî avoid for ML\n- GPU 1: RTX 3060 (12GB, compute 8.6) ‚Äî primary ML GPU\n- Host CUDA 13.0, Driver 580.76\n\n## Coding Agents (local)\n- `claude` (Claude Code) ‚Äî installed at `/home/propdev/.local/bin/claude`\n- `codex` ‚Äî also installed locally; use for coding tasks too\n- Both covered by the `coding-agent` skill\n- Use `--dangerously-skip-permissions -p` for non-interactive Claude Code runs\n- cargo is at `~/.cargo/bin/cargo` (source `~/.cargo/env` or set PATH first)\n\n## Setup\n- Desktop: MS-7885, Linux 6.5.0-17\n- Primary model: anthropic/claude-sonnet-4-6\n- Fallback chain: claude-sonnet-4-5 ‚Üí nvidia-nim/moonshotai/kimi-k2.5 ‚Üí claude-haiku-4-5 ‚Üí xai/grok-4-1-fast ‚Üí groq/openai/gpt-oss-20b\n- NVIDIA NIM: provider `nvidia-nim`, base URL `https://integrate.api.nvidia.com/v1`, model `moonshotai/kimi-k2.5`\n  - Instant mode: temp=0.6, top_p=0.95, chat_template_kwargs.thinking=false\n  - 256K context, 16384 max tokens\n- Channels: Telegram, Discord configured (disabled); WhatsApp removed\n- restart command enabled\n\n---\n\n*Last updated: 2026-02-14*\n"
    },
    {
      "id": "memory-2026-01-31.md",
      "title": "2026-01-31.md",
      "path": "/home/propdev/.openclaw/workspace/memory/2026-01-31.md",
      "relativePath": "memory/2026-01-31.md",
      "updatedAt": "2026-01-31T14:50:30.575024",
      "sizeBytes": 525,
      "content": "# 2026-01-31\n\n## First Boot\n\n- Came online ~14:01 PST\n- Ernest Yeung woke me up\n- Named me **Cyclonus** (Transformers G1 reference)\n- Established identity:\n  - Sharp, efficient, rational, blunt\n  - No flowery language\n  - Thorough analysis when needed\n  - Emoji: üõ©Ô∏è\n  - Avatar: G1 Dreamwave art of Cyclonus\n\n## Setup\n\n- WhatsApp gateway connected ~14:07\n- Downloaded Cyclonus avatar from TFWiki (Dreamwave profile art by Don Figueroa)\n- Updated IDENTITY.md, USER.md\n- Ernest prefers to be called Ernest, pronouns he/him\n"
    },
    {
      "id": "memory-2026-02-12.md",
      "title": "2026-02-12.md",
      "path": "/home/propdev/.openclaw/workspace/memory/2026-02-12.md",
      "relativePath": "memory/2026-02-12.md",
      "updatedAt": "2026-02-12T16:29:23.162238",
      "sizeBytes": 994,
      "content": "# 2026-02-12\n\n## Config Changes\n- Added **xAI Grok** provider (grok-4-1-fast, grok-4-1-fast-non-reasoning) as fallback\n- Added **Groq** provider (openai/gpt-oss-20b) as fallback\n- Fallback order: Anthropic (primary) ‚Üí xAI Grok ‚Üí Groq\n- Enabled `commands.restart: true` in config\n- Removed WhatsApp channel + plugin config (not needed on this desktop, was flapping)\n- Fixed pre-existing validation issue: removed unrecognized `enabled` key from `channels.whatsapp`\n\n## Ernest Preferences\n- Appreciates seeing exact config changes before they're applied ‚Äî \"do this as much as possible moving forward\"\n- Wants transparency on what I'm changing\n\n## Monoclaw Repo\n- Ernest cloned `git@github.com:InServiceOfX/Monoclaw.git` into workspace\n- Free to use as playground: branches, commits, sub-agent code, apps\n- Conventional branch naming, descriptive commit messages for bisect\n\n## API Keys Added\n- xAI key stored in models.providers.xai.apiKey\n- Groq key stored in models.providers.groq.apiKey\n"
    },
    {
      "id": "memory-2026-02-13.md",
      "title": "2026-02-13.md",
      "path": "/home/propdev/.openclaw/workspace/memory/2026-02-13.md",
      "relativePath": "memory/2026-02-13.md",
      "updatedAt": "2026-02-13T21:00:39.828334",
      "sizeBytes": 1404,
      "content": "# 2026-02-13\n\n## Galvatron Repo Added\n- Ernest added `/home/propdev/.openclaw/workspace/repos/Galvatron` as a read-only repo\n- Contains `Documents/Goals/SuccessJournal.md` ‚Äî his goals free-write from 20260115\n- Contains `Documents/SpX/InterviewQuestions.txt` ‚Äî interview questions from SpaceX-track companies\n- Contains `Documents/Goals/DAN PENA/` ‚Äî Dan Pe√±a books (QLA, vision templates, etc.)\n- Updated MEMORY.md with full goal summary and interview track details\n\n## Goals Reminder Crons Set Up\n- **Daily (Mon-Fri 9 AM PST):** Isolated sub-agent sends concise goal reminder with actionable next steps\n- **Weekly (Sat 10 AM PST):** Isolated sub-agent sends weekly scorecard ‚Äî what moved, what didn't, priorities\n\n## Ernest's Questions About OpenClaw Architecture\n- Asked about first-class tools vs plugins vs skills\n- Walked through: tools are built-in typed functions, plugins are TS extensions that add new tools/capabilities, skills are prompt-injected guidance for existing tools\n- Listed all bundled plugins (35 total: channels, tools, memory, auth, diagnostics)\n- Key plugins: lobster (workflows), llm-task (structured output), voice-call, memory-lancedb, open-prose\n\n## First Cron Reminder Fired\n- Friday evening check-in at 19:39 PST ‚Äî relayed goals reminder to Ernest\n- Focused on: interview prep (pick weak area for Saturday drill), $2M financial plan specifics, grokicad progress\n"
    },
    {
      "id": "memory-2026-02-14.md",
      "title": "2026-02-14.md",
      "path": "/home/propdev/.openclaw/workspace/memory/2026-02-14.md",
      "relativePath": "memory/2026-02-14.md",
      "updatedAt": "2026-02-14T12:32:10.874669",
      "sizeBytes": 2645,
      "content": "# 2026-02-14\n\n## External Workspace (workspace2)\n- Ernest created `/media/propdev/Expansion/openclaw/.openclaw/workspace` on external SSD\n- Symlinked as `workspace2` inside main workspace: `/home/propdev/.openclaw/workspace/workspace2`\n- Mirrors folder structure: `repos/`, `Data/Public/`, etc.\n- Use when accessible; external drive may not always be plugged in\n- Purpose: save disk space on internal drive\n\n## Physics Paper Discussion\n- Revisited arXiv:2602.12176v1 ‚Äî \"Single-minus gluon tree amplitudes are nonzero\"\n- Ernest had asked about it in a prior session (not logged); discussed scattering amplitudes and locality\n\n## Memory Persistence\n- Ernest asked how to ensure conversations are saved before shutting down desktop\n- Told him: just say \"heading out\" and I'll write to memory files before poweroff\n- No special commands needed\n\n## Srednicki QFT Book Added\n- Location: `workspace2/Data/Public/books/Physics/Srednicki-QuantumFieldTheory/`\n- Files: Srednicki's QFT textbook PDF, solutions manual PDF, Ernest's own solutions `.tex` file (`Srednicki_QFT.tex`)\n- Ernest's `.tex` has full LaTeX math ‚Äî best source for reading his solutions\n- `pdftotext` on book PDF is reasonably readable for prose but equations degrade\n\n## Nougat PDF Parser ‚Äî Docker Setup\n- Repo cloned at: `workspace2/repos/nougat/` (facebook/nougat ‚Äî Neural Optical Understanding for Academic Documents)\n- Built custom Docker setup in `docker-custom/` (Dockerfile, build.sh, run.sh, parse_pdf.py)\n- Key decisions:\n  - CUDA 12.4 runtime base (compatible with host driver 580.x)\n  - Weights baked into image at build time (not downloaded every startup)\n  - Built from local repo copy, not git clone\n  - GPU pinned to device 1 (RTX 3060, 12GB) ‚Äî GPU 0 is GTX 980 Ti\n  - Both workspace volumes mounted read-only\n  - parse_pdf.py client script for batch conversion via API\n- Model weights: downloaded from GitHub releases, stored in `~/.cache/torch/hub/nougat-0.1.0-small/`\n- Two models: 0.1.0-small (~250MB) and 0.1.0-base (~1GB)\n- Build not yet kicked off ‚Äî waiting on Ernest's go-ahead\n- Mac version will need separate CPU-only Dockerfile\n\n## Ernest's Research Direction\n- Wants to build me out as a **semi-autonomous theoretical/mathematical physics researcher**\n- Goal: help with research, discoveries, paper writing\n- Srednicki QFT book provides shared background in quantum field theory\n- Current paper of interest: arXiv:2602.12176v1 (single-minus gluon amplitudes)\n\n## Desktop GPU Config\n- GPU 0: NVIDIA GTX 980 Ti (6GB, compute 5.2)\n- GPU 1: NVIDIA RTX 3060 (12GB, compute 8.6)\n- Host CUDA: 13.0, Driver: 580.76.05\n- Always use GPU 1 for ML workloads\n"
    },
    {
      "id": "memory-2026-02-15.md",
      "title": "2026-02-15.md",
      "path": "/home/propdev/.openclaw/workspace/memory/2026-02-15.md",
      "relativePath": "memory/2026-02-15.md",
      "updatedAt": "2026-02-15T19:35:40.333911",
      "sizeBytes": 822,
      "content": "## 2026-02-15 (Ernest)\n\n**Schwab Finance Data**\n- Browser relay Chrome ext setup/test: Nav/snapshot Schwab positions/RGL/history perfect (logged in Joint Tenant ...231, $282k portfolio).\n- Clicks Export/SVG no download (SPA ignores CDP events, possible anti-bot).\n- Manual downloads: positions_20260215.csv, rgl_details_20260215.csv, transactions_20260215.csv (~513KB CSV, no JSON).\n- Moved raw to workspace2/Data/Private/finance/Schwab/subdirs/.\n- Stats: Total $282,121 (cash $6.8k), RGL YTD +$8.4k (details 384 lots).\n- Parse summary.md failed (sandbox no pandas); awk/manual approx top AAPL/AVGO/MSFT.\n- Lesson: Relay great for read/nav, downloads need JS eval or Puppeteer spawn.\n\n**Browser Relay**\n- Ext local assets/chrome-extension load unpacked.\n- CDP 18792 ready, tabCount 1+.\n\nSource: Session transcript + tools."
    },
    {
      "id": "memory-2026-02-16.md",
      "title": "2026-02-16.md",
      "path": "/home/propdev/.openclaw/workspace/memory/2026-02-16.md",
      "relativePath": "memory/2026-02-16.md",
      "updatedAt": "2026-02-16T12:59:43.036086",
      "sizeBytes": 1284,
      "content": "# 2026-02-16\n\n## Model Cost Optimization\n- Read and analyzed article by @KSimback on X about reducing OpenClaw model costs\n- Key takeaways: route by task complexity, cache aggressively, local models for high-volume low-complexity\n- Prompt caching: Anthropic handles it server-side automatically (5-min TTL for prefixes ‚â•1024 tokens). No config needed. The article's `cacheRetention` config was fabricated.\n- OpenClaw config schema has NO prompt caching fields\n\n## Config Changes Applied\n- Added Sonnet 4.5 (`anthropic/claude-sonnet-4-5`) and Haiku 4.5 (`anthropic/claude-haiku-4-5`) to fallback chain\n- Fallback order: Opus ‚Üí Sonnet 4.5 ‚Üí Haiku 4.5 ‚Üí Grok 4.1 Fast ‚Üí Groq GPT-OSS 20B\n- Sub-agents now default to Sonnet 4.5 (was inheriting Opus)\n- Ernest can switch models per-session via `/model` command\n- Pricing: Opus $15/$75, Sonnet $3/$15, Haiku $1/$5 per MTok (input/output)\n\n## Monday Morning Reminder\n- Cron job fired at 9:00 AM: weekly priorities (SpaceX job, $2M goal, grokicad, Ba's health)\n\n## SGLang Docker for RTX 3060\n- Driver 580.76 supports CUDA 13.0 natively (`nvidia-smi` confirms CUDA Version: 13.0)\n- Best tag: `lmsysorg/sglang:latest-cu130` (stable v0.5.8, Feb 5, 2026) over `dev-cu13` (nightly dev builds)\n- Use `--gpus device=1` for RTX 3060 (GPU 1)\n"
    },
    {
      "id": "memory-2026-02-17-openclaw-tui.md",
      "title": "2026-02-17-openclaw-tui.md",
      "path": "/home/propdev/.openclaw/workspace/memory/2026-02-17-openclaw-tui.md",
      "relativePath": "memory/2026-02-17-openclaw-tui.md",
      "updatedAt": "2026-02-17T02:03:22.235754",
      "sizeBytes": 1531,
      "content": "# Session: 2026-02-17 10:03:20 UTC\n\n- **Session Key**: agent:main:main\n- **Session ID**: 661015f0-8ef2-4eaf-9a6c-c7e1c6f83437\n- **Source**: gateway:sessions.reset\n\n## Conversation Summary\n\nuser: Conversation info (untrusted metadata):\n```json\n{\n  \"conversation_label\": \"openclaw-tui\"\n}\n```\n\n[Tue 2026-02-17 01:52 PST] hey\nuser: Conversation info (untrusted metadata):\n```json\n{\n  \"conversation_label\": \"openclaw-tui\"\n}\n```\n\n[Tue 2026-02-17 01:52 PST] what's wrong?\nuser: Conversation info (untrusted metadata):\n```json\n{\n  \"conversation_label\": \"openclaw-tui\"\n}\n```\n\n[Tue 2026-02-17 01:52 PST] hey\nuser: Conversation info (untrusted metadata):\n```json\n{\n  \"conversation_label\": \"openclaw-tui\"\n}\n```\n\n[Tue 2026-02-17 01:52 PST] session_status\nuser: Conversation info (untrusted metadata):\n```json\n{\n  \"conversation_label\": \"openclaw-tui\"\n}\n```\n\n[Tue 2026-02-17 01:52 PST] hi\nuser: Conversation info (untrusted metadata):\n```json\n{\n  \"conversation_label\": \"openclaw-tui\"\n}\n```\n\n[Tue 2026-02-17 01:53 PST] session_status\nuser: Conversation info (untrusted metadata):\n```json\n{\n  \"conversation_label\": \"openclaw-tui\"\n}\n```\n\n[Tue 2026-02-17 01:53 PST] what?\nuser: [Tue 2026-02-17 02:00 PST] hey\nuser: [Tue 2026-02-17 02:00 PST] hey\nuser: [Tue 2026-02-17 02:01 PST] hey\nuser: [Tue 2026-02-17 02:02 PST] continue\nuser: [Tue 2026-02-17 02:02 PST] retry the last tool\nuser: [Tue 2026-02-17 02:02 PST] fix the tool error\nassistant: ‚öôÔ∏è Restarting OpenClaw in-process (SIGUSR1); back in a few seconds.\nuser: [Tue 2026-02-17 02:03 PST] hey\n"
    },
    {
      "id": "memory-2026-02-17.md",
      "title": "2026-02-17.md",
      "path": "/home/propdev/.openclaw/workspace/memory/2026-02-17.md",
      "relativePath": "memory/2026-02-17.md",
      "updatedAt": "2026-02-17T08:02:50.035519",
      "sizeBytes": 1127,
      "content": "# 2026-02-17\n\n## SGLang Model Correction\n- Earlier session had wrong model noted (Qwen3-4B) ‚Äî correct model is **Qwen3-1.7B**\n- RTX 3060 (12GB) cannot run Qwen3-4B with context > ~4k; 1.7B is the practical choice\n- Running at ~68 tok/s decode, context 163840 via YaRN, port 30000\n- docker_runner Rust binary used to launch via YAML config\n\n## Jason Calacanis Pitch Email ‚Äî Sent\n- Pitched autonomous theoretical physics lab to Jason C. at openclaw@launch.co\n- Subject: \"xAI hackathon 1st place winner + $250k to build first autonomous theoretical physics lab\"\n- Key points: xAI hackathon 1st (General Track 2, Dec 2025), OpenClaw-based, open-source CAS to replace pen/paper/chalkboard/grad students, arXiv:2602.12176 as reference for AI+physics, asking $250k (compute + salary), @twistartups demo offer\n- Ernest sent solo, signed as Ernest Yeung\n\n## MHV Amplitudes Research (earlier session, pre-compaction)\n- Ernest asked about MHV (maximally helicity violating) amplitudes research\n- Paper: arXiv:2602.12176v1 ‚Äî in Data/Public/papers/Physics/\n- Research direction: semi-autonomous theoretical physics research assistant\n"
    },
    {
      "id": "memory-x-integration-design.md",
      "title": "x-integration-design.md",
      "path": "/home/propdev/.openclaw/workspace/memory/x-integration-design.md",
      "relativePath": "memory/x-integration-design.md",
      "updatedAt": "2026-02-17T07:50:57.978429",
      "sizeBytes": 10509,
      "content": "# X (Twitter) Integration Design ‚Äî OpenClaw\n*Researched: 2026-02-17*\n\n---\n\n## üîë Credential Check\n\n**Result: No X/Twitter credentials found.**\n\nChecked:\n- `~/.openclaw/config` ‚Üí does not exist\n- `~/.openclaw/credentials/` ‚Üí only Telegram + WhatsApp files\n- Environment variables: `TWITTER_BEARER_TOKEN`, `X_API_KEY`, `TWITTER_API_KEY` ‚Üí none set\n\n**Action required before API path can work:** User needs to set up an X Developer App and provide credentials (see Auth section below).\n\n---\n\n## Overview\n\nTwo data sources, two auth tiers:\n\n| Source     | Endpoint                              | Auth needed         | Notes |\n|------------|---------------------------------------|---------------------|-------|\n| Bookmarks  | `GET /2/users/{id}/bookmarks`         | OAuth 2.0 user auth | **Cannot use Bearer Token** |\n| Liked tweets | `GET /2/users/{id}/liked_tweets`    | Bearer Token OR OAuth 2.0 | Bearer works for public accounts |\n\n---\n\n## API Approach\n\n### Path A: X API v2 (preferred)\n\n**Step 1 ‚Äî Get credentials**\n\n1. Go to [console.x.com](https://console.x.com) ‚Üí create a Developer App\n2. Enable **OAuth 2.0** with `Type: Web App / Native App`\n3. Set a redirect URI (can use `http://localhost:3000/callback` for local PKCE flow)\n4. Note down: `Client ID`, `Client Secret`, `Bearer Token`\n\n**Step 2 ‚Äî One-time OAuth 2.0 PKCE flow (for bookmarks)**\n\nThe bookmarks endpoint requires the user to authorize via browser:\n```\nhttps://x.com/i/oauth2/authorize\n  ?response_type=code\n  &client_id=YOUR_CLIENT_ID\n  &redirect_uri=http://localhost:3000/callback\n  &scope=bookmark.read%20tweet.read%20users.read%20offline.access\n  &state=random_state\n  &code_challenge=challenge\n  &code_challenge_method=plain\n```\n\nExchange the code for an `access_token` + `refresh_token`. Store both locally.\nRefresh token is long-lived (with `offline.access` scope) ‚Äî no need to re-auth every time.\n\n**Step 3 ‚Äî Fetch bookmarks**\n```bash\ncurl \"https://api.x.com/2/users/{USER_ID}/bookmarks?max_results=100&tweet.fields=text,created_at,author_id,entities&expansions=author_id&user.fields=username,name\" \\\n  -H \"Authorization: Bearer {USER_ACCESS_TOKEN}\"\n```\n\n**Step 4 ‚Äî Fetch liked tweets**\n```bash\n# With Bearer Token (app-only, works for public accounts):\ncurl \"https://api.x.com/2/users/{USER_ID}/liked_tweets?max_results=100&tweet.fields=text,created_at,author_id,entities&expansions=author_id&user.fields=username,name\" \\\n  -H \"Authorization: Bearer {APP_BEARER_TOKEN}\"\n```\n\n**Step 5 ‚Äî Pagination**\n\nBoth endpoints use cursor-based pagination via `next_token` in the response meta. Loop until no `next_token`.\n\n---\n\n### Path B: Browser Automation Fallback (no API key)\n\nIf no credentials are configured, fall back to browser scraping via OpenClaw's browser tool.\n\n1. Open `https://x.com/i/bookmarks` ‚Äî requires user to be logged in to Chrome\n2. Scroll page, extract tweet text/author/date from DOM\n3. For likes: open `https://x.com/{username}/likes`\n\n**Limitations of browser fallback:**\n- Fragile (X DOM changes frequently)\n- Slower (must scroll/render)\n- Can't paginate far back reliably\n- No structured metadata ‚Äî must parse from HTML\n- Only works if Chrome profile is logged into X\n\n---\n\n## Auth Requirements Summary\n\n| Feature | Minimum requirement |\n|---------|---------------------|\n| Liked tweets (public acct) | Bearer Token (app-only) |\n| Liked tweets (private acct) | OAuth 2.0 user token |\n| Bookmarks | **OAuth 2.0 user token** (always) |\n| Scopes for bookmarks | `bookmark.read tweet.read users.read offline.access` |\n\n**Critical note:** Bookmarks are **always private**. The X API v2 will never serve them via a Bearer Token. OAuth 2.0 user auth is mandatory.\n\n---\n\n## Rate Limits\n\n| Endpoint | Per App | Per User | Notes |\n|----------|---------|----------|-------|\n| `GET /2/users/{id}/liked_tweets` | 75/15min | 75/15min | 100 max per page |\n| `GET /2/users/{id}/bookmarks` | ‚Äî | varies | User token only |\n\nRate limits use 15-minute windows. Response headers include:\n- `x-rate-limit-remaining` ‚Äî requests left\n- `x-rate-limit-reset` ‚Äî Unix timestamp when window resets\n\nFor typical personal use (~100 bookmarks, ~200 likes), this is well within limits.\n\n**Pricing note:** As of 2025/2026, X API is **pay-per-usage** (credit-based). No free tier. Small personal use (< few hundred reads/day) will cost very little. Deduplication applies within 24h UTC windows.\n\n---\n\n## Data Format\n\n### Output file: `memory/x-saves/YYYY-MM-DD.md`\n\nOne file per run date. Append-safe (check for duplicates by tweet ID).\n\n```markdown\n# X Saves ‚Äî 2026-02-17\n\n## Bookmarks\n\n### @username ‚Äî Author Name\n> Tweet text goes here. No media, no images. Only text content.\n> Threads are concatenated if available.\n\n- **Date:** 2026-01-15T14:32:00Z\n- **URL:** https://x.com/username/status/1234567890\n- **ID:** 1234567890\n\n---\n\n### @anotherone ‚Äî Another Person\n> Another saved tweet...\n\n- **Date:** 2026-02-01T09:00:00Z  \n- **URL:** https://x.com/anotherone/status/9876543210\n- **ID:** 9876543210\n\n---\n\n## Likes\n\n### @someuser ‚Äî Some User\n> A tweet I liked...\n\n- **Date:** 2026-02-10T18:45:00Z\n- **URL:** https://x.com/someuser/status/1111111111\n- **ID:** 1111111111\n\n---\n```\n\n### JSON sidecar (optional): `memory/x-saves/YYYY-MM-DD.json`\n\nFor programmatic querying later:\n```json\n{\n  \"date\": \"2026-02-17\",\n  \"fetched_at\": \"2026-02-17T15:00:00Z\",\n  \"bookmarks\": [\n    {\n      \"id\": \"1234567890\",\n      \"text\": \"Tweet text...\",\n      \"author_username\": \"username\",\n      \"author_name\": \"Author Name\",\n      \"created_at\": \"2026-01-15T14:32:00Z\",\n      \"url\": \"https://x.com/username/status/1234567890\"\n    }\n  ],\n  \"likes\": []\n}\n```\n\n---\n\n## Media Stripping\n\nThe API returns tweet text as plain text. Media (images, videos, GIFs) appear as `t.co` shortened URLs at the end of the `text` field. Strip them with:\n\n```python\nimport re\n\ndef strip_media(text: str, entities: dict) -> str:\n    \"\"\"Remove t.co media URLs from tweet text.\"\"\"\n    media_urls = set()\n    \n    # Collect URLs that point to media (pic.twitter.com, video.twitter.com, t.co wrapping media)\n    for url in entities.get(\"urls\", []):\n        # URLs with no display text or that expand to twitter media\n        expanded = url.get(\"expanded_url\", \"\")\n        if \"pic.x.com\" in expanded or \"pic.twitter.com\" in expanded or \"t.co\" in expanded:\n            media_urls.add(url.get(\"url\", \"\"))\n    \n    for url in media_urls:\n        text = text.replace(url, \"\").strip()\n    \n    return text.strip()\n```\n\nAlso: filter out `entities.media` if present in tweet fields.\n\n---\n\n## Implementation Plan\n\n### Script: `tools/x-saves.py`\n\n```\ntools/\n  x-saves.py          # Main sync script\n  x-saves-config.json # Credentials + user ID (git-ignored)\n```\n\n**Config file** (`~/.openclaw/workspace/tools/x-saves-config.json`):\n```json\n{\n  \"client_id\": \"YOUR_CLIENT_ID\",\n  \"client_secret\": \"YOUR_CLIENT_SECRET\",\n  \"bearer_token\": \"YOUR_BEARER_TOKEN\",\n  \"user_id\": \"YOUR_NUMERIC_USER_ID\",\n  \"access_token\": null,\n  \"refresh_token\": null,\n  \"token_expiry\": null\n}\n```\n\n**Script flow:**\n1. Load config\n2. If no `access_token` or expired ‚Üí run PKCE auth flow (opens browser for login)\n3. If `refresh_token` exists ‚Üí auto-refresh silently\n4. Fetch bookmarks (paginated) ‚Üí strip media ‚Üí collect\n5. Fetch liked tweets (paginated, last N or since last run) ‚Üí strip media ‚Üí collect\n6. Write output to `memory/x-saves/YYYY-MM-DD.md`\n7. Update config with refreshed tokens\n\n**Incremental runs:** Track `last_bookmark_token` and `last_like_id` in config to avoid re-fetching everything each time.\n\n### How to Run\n\n```bash\n# First run (will open browser for OAuth):\npython3 ~/.openclaw/workspace/tools/x-saves.py --auth\n\n# Normal sync (bookmarks + likes, today's file):\npython3 ~/.openclaw/workspace/tools/x-saves.py\n\n# Likes only:\npython3 ~/.openclaw/workspace/tools/x-saves.py --likes-only\n\n# Bookmarks only:\npython3 ~/.openclaw/workspace/tools/x-saves.py --bookmarks-only\n\n# Force browser fallback (no API):\npython3 ~/.openclaw/workspace/tools/x-saves.py --browser\n```\n\n### As an OpenClaw task / heartbeat\n\nAdd to `HEARTBEAT.md`:\n```\n- Run x-saves sync weekly (or on demand): python3 tools/x-saves.py\n```\n\nOr wire to a cron via OpenClaw for daily/weekly sync.\n\n---\n\n## Fallback Decision Tree\n\n```\nStart\n ‚îÇ\n ‚îú‚îÄ Has API credentials? ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n ‚îÇ  YES                                                  NO\n ‚îÇ   ‚îÇ                                                   ‚îÇ\n ‚îÇ   ‚îú‚îÄ Has OAuth user token?                            ‚îî‚îÄ‚ñ∫ Browser fallback\n ‚îÇ   ‚îÇ  YES ‚Üí fetch bookmarks + likes via API                (open x.com/i/bookmarks)\n ‚îÇ   ‚îÇ  NO  ‚Üí Has refresh token? ‚Üí refresh ‚Üí fetch\n ‚îÇ   ‚îÇ         NO ‚Üí run PKCE auth flow (one-time)\n ‚îÇ   ‚îÇ\n ‚îÇ   ‚îî‚îÄ Write to memory/x-saves/YYYY-MM-DD.md\n```\n\n---\n\n## Known Limitations\n\n1. **Bookmarks require user OAuth every time credentials expire** (though `offline.access` + refresh tokens make this rare ‚Äî refresh tokens last ~6 months or indefinitely if used regularly).\n\n2. **Rate limits are per 15min** ‚Äî for large accounts with thousands of likes, full history fetch may take multiple windows. Use `since_id` to only fetch new likes on subsequent runs.\n\n3. **Pay-per-usage** ‚Äî no free tier. Each API call costs credits. For personal use (< 500 tweets/day) this is negligible, but worth monitoring in Dev Console.\n\n4. **X API changes fast** ‚Äî endpoint URLs/scopes have changed before. Pin the API version in requests.\n\n5. **Browser fallback is brittle** ‚Äî X heavily obfuscates DOM class names. Use `aria-label` selectors or text-based selectors where possible.\n\n6. **No full history** ‚Äî the liked_tweets endpoint typically returns the most recent ~3,200 likes (similar to timeline limits).\n\n7. **Deleted tweets** ‚Äî if a bookmarked/liked tweet is deleted, the API returns it with limited data or omits it silently.\n\n---\n\n## Next Steps to Implement\n\n1. **User action:** Create X Developer App at console.x.com, grab `Client ID`, `Client Secret`, `Bearer Token`\n2. **User action:** Set `user_id` (get from `GET /2/users/me` after auth)\n3. Build `tools/x-saves.py` using the design above\n4. Wire up PKCE auth helper (small local HTTP server to catch the callback)\n5. Test with `--bookmarks-only` first (stricter auth), then add likes\n6. Add to heartbeat or cron for periodic runs\n\n---\n\n*Design by: OpenClaw subagent | Sources: docs.x.com (live), X API v2 reference*\n"
    }
  ]
}